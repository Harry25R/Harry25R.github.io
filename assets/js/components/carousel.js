import{getProjects as e}from"./data.js";import{escapeHTML as t,prefersReducedMotion as a}from"./utils.js";export async function initCarousel(n=document){const s=n.querySelector("[data-carousel]");if(!s)return;const r=s.querySelector("[data-carousel-slide]");if(!r)return;const o=s.querySelector("[data-carousel-prev]"),l=s.querySelector("[data-carousel-next]"),c=s.querySelector("[data-carousel-toggle]");let i=!1,d=null;const u=(await e()).slice(0,5).map(e=>({title:e.title,summary:e.summary}));if(0===u.length)return;let m=0;const y=()=>{const e=u[m];r.innerHTML=`\n      <h3 class="text-lg font-semibold">${t(e.title)}</h3>\n      <p class="text-sm text-slate-600 dark:text-slate-300">${t(e.summary)}</p>\n    `};y(),c&&(c.textContent="Play");const f=e=>{i=e&&!a.matches,c?.setAttribute("aria-pressed",i?"true":"false"),c.textContent=i?"Pause":"Play",c.classList.toggle("border-brand",i),d&&window.clearTimeout(d),i&&p()},p=()=>{i&&(d=window.setTimeout(()=>{h(m+1),p()},5e3))},h=e=>{m=(e+u.length)%u.length,y()};o?.addEventListener("click",()=>{h(m-1)}),l?.addEventListener("click",()=>{h(m+1)}),c?.addEventListener("click",()=>{f(!i)});const g=e=>{e.matches&&i&&f(!1)};"function"==typeof a.addEventListener?a.addEventListener("change",g):"function"==typeof a.addListener&&a.addListener(g),"boolean"==typeof a.matches&&a.matches&&f(!1)}