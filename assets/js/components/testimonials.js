import{getTestimonials as t}from"./data.js";import{escapeHTML as e,prefersReducedMotion as n}from"./utils.js";export async function initTestimonials(a=document){const o=a.querySelector("[data-testimonials]"),i=a.querySelector("[data-testimonial-controls]");if(!o||!i)return;const s=i.querySelector("[data-testimonial-prev]"),r=i.querySelector("[data-testimonial-next]"),l=i.querySelector("[data-testimonial-toggle]"),c=await t();if(!Array.isArray(c)||0===c.length)return;let d=0,u=!1,m=null;const y=()=>{const t=c[d];o.innerHTML=`\n      <blockquote class="text-lg font-medium text-slate-800 dark:text-slate-100">${e(t.quote)}</blockquote>\n      <cite class="mt-4 block text-sm text-slate-600 dark:text-slate-400">${e(t.author||"Colleague")}</cite>\n    `},f=t=>{u=t&&!n.matches,l?.setAttribute("aria-pressed",u?"true":"false"),l.textContent=u?"Pause":"Play",m&&window.clearTimeout(m),u&&x()},x=()=>{u&&(m=window.setTimeout(()=>{g(d+1),x()},6e3))},g=t=>{d=(t+c.length)%c.length,y()};s?.addEventListener("click",()=>g(d-1)),r?.addEventListener("click",()=>g(d+1)),l?.addEventListener("click",()=>f(!u));const h=t=>{t.matches&&u&&f(!1)};"function"==typeof n.addEventListener?n.addEventListener("change",h):"function"==typeof n.addListener&&n.addListener(h),n.matches&&f(!1),y(),l&&(l.textContent="Play")}