const t=(t="")=>t.toLowerCase().trim();function e({root:e,listSelector:r,cardSelector:a,searchId:l,sortId:o,countId:n,filterSelector:c,labels:i,sorters:s}){const d=e.querySelector(r);if(!d)return;const u=Array.from(d.querySelectorAll(a));if(0===u.length)return;const h=l?e.getElementById(l):null,p=o?e.getElementById(o):null,f=n?e.getElementById(n):null,b=Array.from(e.querySelectorAll(`${c} button[data-filter]`));let g="all";const m=()=>{b.forEach(t=>{const e=t.dataset.filter===g;t.setAttribute("aria-pressed",e?"true":"false"),t.classList.toggle("bg-blue-600",e),t.classList.toggle("text-white",e)})},S=()=>{const e=t(h?.value||"");let r=0;u.forEach(a=>{const l="all"===g||(a.dataset.tags||"").includes(g),o=`${a.querySelector("h2")?.textContent||""} ${a.querySelector("p")?.textContent||""}`,n=!e||t(o).includes(e),c=l&&n;a.style.display=c?"":"none",c&&(r+=1)}),f&&(f.textContent=r===u.length?i.all:0===r?i.none:`Showing ${r} ${i.noun}${r>1?"s":""}.`)};b.forEach(t=>{t.addEventListener("click",()=>{g=t.dataset.filter||"all",m(),S()})}),h?.addEventListener("input",S),p?.addEventListener("change",t=>{var e;e=t.target.value,p&&s&&(s[e]||s.default||(()=>0))&&[...u].sort(s[e]||s.default).forEach(t=>d.appendChild(t)),S()}),m(),S()}export function initProjectFilters(t=document){!function(t){t.querySelectorAll("[data-project-toggle]").forEach(t=>{const e=document.getElementById(t.getAttribute("aria-controls")||"");e&&(e.setAttribute("hidden",""),t.setAttribute("aria-expanded","false"),t.addEventListener("click",()=>{const r=e.hasAttribute("hidden");e.toggleAttribute("hidden",!r),t.setAttribute("aria-expanded",r?"true":"false")}))})}(t),e({root:t,listSelector:"[data-project-grid]",cardSelector:"[data-project-card]",searchId:"project-search",sortId:"project-sort",countId:"results-count",filterSelector:"[data-filter-group]",labels:{all:"Showing all projects.",none:"No projects match the current filters.",noun:"project"},sorters:{impact:(t,e)=>Number(e.dataset.impact||0)-Number(t.dataset.impact||0),default:(t,e)=>Number(e.dataset.recency||0)-Number(t.dataset.recency||0)}})}export function initPublicationFilters(r=document){e({root:r,listSelector:"[data-publication-list]",cardSelector:"[data-publication]",searchId:"publication-search",sortId:"publication-sort",countId:"publication-count",filterSelector:"[data-publication-filter-group]",labels:{all:"Showing all publications.",none:"No publications match the current filters.",noun:"publication"},sorters:{title:(e,r)=>t(e.querySelector("h2")?.textContent||"").localeCompare(t(r.querySelector("h2")?.textContent||"")),default:(t,e)=>Number(e.dataset.year||0)-Number(t.dataset.year||0)}})}export function initTalkFilters(r=document){e({root:r,listSelector:"[data-talk-list]",cardSelector:"[data-talk]",searchId:"talk-search",sortId:"talk-sort",countId:"talk-count",filterSelector:"[data-talk-filter-group]",labels:{all:"Showing all talks.",none:"No talks match the current filters.",noun:"talk"},sorters:{title:(e,r)=>t(e.querySelector("h2")?.textContent||"").localeCompare(t(r.querySelector("h2")?.textContent||"")),default:(t,e)=>(new Date(e.dataset.date||"").getTime()||0)-(new Date(t.dataset.date||"").getTime()||0)}})}