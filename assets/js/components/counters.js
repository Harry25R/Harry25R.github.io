import{prefersReducedMotion as t}from"./utils.js";function e(t,e=0){return e>0?Number(t).toFixed(e):Math.round(Number(t)).toString()}export function initCounters(r=document){const n=Array.from(r.querySelectorAll(".counter[data-target]"));if(0===n.length)return;const o=new IntersectionObserver(r=>{r.forEach(r=>{r.isIntersecting&&(r=>{const{target:n}=r.target.dataset,a=Number(r.target.dataset.precision||"0"),s=Number(n);if(Number.isNaN(s))return;if(t.matches)return r.target.textContent=e(s,a),void o.unobserve(r.target);const i=performance.now(),u=t=>{const n=Math.min((t-i)/1200,1),o=s*n;r.target.textContent=e(o,a),n<1?requestAnimationFrame(u):r.target.textContent=e(s,a)};requestAnimationFrame(u),o.unobserve(r.target)})(r)})},{threshold:.4});n.forEach(t=>o.observe(t));const a=t=>{t.matches&&n.forEach(t=>{const{target:r}=t.dataset,n=Number(t.dataset.precision||"0");t.textContent=e(Number(r),n),o.unobserve(t)})};"function"==typeof t.addEventListener?t.addEventListener("change",a):"function"==typeof t.addListener&&t.addListener(a)}